{"remainingRequest":"/Users/jackson/Documents/Work/DEMO/VueJSButterCMS/node_modules/babel-loader/lib/index.js!/Users/jackson/Documents/Work/DEMO/VueJSButterCMS/node_modules/eslint-loader/index.js??ref--13-0!/Users/jackson/Documents/Work/DEMO/VueJSButterCMS/src/services/auth.service.js","dependencies":[{"path":"/Users/jackson/Documents/Work/DEMO/VueJSButterCMS/src/services/auth.service.js","mtime":1592322774000},{"path":"/Users/jackson/Documents/Work/DEMO/VueJSButterCMS/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackson/Documents/Work/DEMO/VueJSButterCMS/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/jackson/Documents/Work/DEMO/VueJSButterCMS/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9qYWNrc29uL0RvY3VtZW50cy9Xb3JrL0RFTU8vVnVlSlNCdXR0ZXJDTVMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy9qYWNrc29uL0RvY3VtZW50cy9Xb3JrL0RFTU8vVnVlSlNCdXR0ZXJDTVMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvamFja3Nvbi9Eb2N1bWVudHMvV29yay9ERU1PL1Z1ZUpTQnV0dGVyQ01TL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL2phY2tzb24vRG9jdW1lbnRzL1dvcmsvREVNTy9WdWVKU0J1dHRlckNNUy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgKiBhcyBGaW5nZXJwcmludDIgZnJvbSAnZmluZ2VycHJpbnRqczInOwppbXBvcnQgKiBhcyBVQVBhcnNlciBmcm9tICd1YS1wYXJzZXItanMnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBIdHRwIH0gZnJvbSAnLi9odHRwLmluaXQnOwppbXBvcnQgeyBSZXNwb25zZVdyYXBwZXIsIEVycm9yV3JhcHBlciB9IGZyb20gJy4vdXRpbCc7CmltcG9ydCAkc3RvcmUgZnJvbSAnLi4vc3RvcmUnOwppbXBvcnQgJHJvdXRlciBmcm9tICcuLi9yb3V0ZXInOwppbXBvcnQgeyBBUElfVVJMIH0gZnJvbSAnLi4vLmVudic7CnZhciBCRUFSRVIgPSAnJzsKZXhwb3J0IHZhciBBdXRoU2VydmljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQXV0aFNlcnZpY2UoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQXV0aFNlcnZpY2UpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEF1dGhTZXJ2aWNlLCBudWxsLCBbewogICAga2V5OiAibWFrZUxvZ2luIiwKCiAgICAvKioKICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAqIEBBUEkKICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9tYWtlTG9naW4gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoX3JlZikgewogICAgICAgIHZhciBlbWFpbCwgcGFzc3dvcmQsIGZpbmdlcnByaW50LCByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBlbWFpbCA9IF9yZWYuZW1haWwsIHBhc3N3b3JkID0gX3JlZi5wYXNzd29yZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2dldEZpbmdlcnByaW50KCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGZpbmdlcnByaW50ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoIiIuY29uY2F0KEFQSV9VUkwsICIvYXV0aC9sb2dpbiIpLCB7CiAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLAogICAgICAgICAgICAgICAgICBmaW5nZXJwcmludDogZmluZ2VycHJpbnQKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIF9zZXRBdXRoRGF0YSh7CiAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiByZXNwb25zZS5kYXRhLmRhdGEuYWNjZXNzVG9rZW4sCiAgICAgICAgICAgICAgICAgIGV4cDogX3BhcnNlVG9rZW5EYXRhKHJlc3BvbnNlLmRhdGEuZGF0YS5hY2Nlc3NUb2tlbikuZXhwCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXcgUmVzcG9uc2VXcmFwcGVyKHJlc3BvbnNlLCByZXNwb25zZS5kYXRhLmRhdGEpKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMjsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3JXcmFwcGVyKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgMTJdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIG1ha2VMb2dpbihfeCkgewogICAgICAgIHJldHVybiBfbWFrZUxvZ2luLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBtYWtlTG9naW47CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJtYWtlTG9nb3V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfbWFrZUxvZ291dCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEh0dHAoewogICAgICAgICAgICAgICAgICBhdXRoOiB0cnVlCiAgICAgICAgICAgICAgICB9KS5wb3N0KCdhdXRoL2xvZ291dCcsIHt9LCB7CiAgICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgICAgX3Jlc2V0QXV0aERhdGEoKTsKCiAgICAgICAgICAgICAgICAkcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICBuYW1lOiAnbG9naW4nCiAgICAgICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7fSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgbmV3IFJlc3BvbnNlV3JhcHBlcihyZXNwb25zZSwgcmVzcG9uc2UuZGF0YS5kYXRhKSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gOTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcldyYXBwZXIoX2NvbnRleHQyLnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1swLCA5XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBtYWtlTG9nb3V0KCkgewogICAgICAgIHJldHVybiBfbWFrZUxvZ291dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gbWFrZUxvZ291dDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInJlZnJlc2hUb2tlbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWZyZXNoVG9rZW5zID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IGF4aW9zOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLnQxID0gIiIuY29uY2F0KEFQSV9VUkwsICIvYXV0aC9yZWZyZXNoLXRva2VucyIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIF9nZXRGaW5nZXJwcmludCgpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfY29udGV4dDMudDIgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MyA9IHsKICAgICAgICAgICAgICAgICAgZmluZ2VycHJpbnQ6IF9jb250ZXh0My50MgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50NCA9IHsKICAgICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMudDAucG9zdC5jYWxsKF9jb250ZXh0My50MCwgX2NvbnRleHQzLnQxLCBfY29udGV4dDMudDMsIF9jb250ZXh0My50NCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICAgIF9zZXRBdXRoRGF0YSh7CiAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiByZXNwb25zZS5kYXRhLmRhdGEuYWNjZXNzVG9rZW4sCiAgICAgICAgICAgICAgICAgIGV4cDogX3BhcnNlVG9rZW5EYXRhKHJlc3BvbnNlLmRhdGEuZGF0YS5hY2Nlc3NUb2tlbikuZXhwCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgbmV3IFJlc3BvbnNlV3JhcHBlcihyZXNwb25zZSwgcmVzcG9uc2UuZGF0YS5kYXRhKSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDE1OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLnQ1ID0gX2NvbnRleHQzWyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX2NvbnRleHQzLnQ1LnJlc3BvbnNlLmRhdGEuY29kZSk7CgogICAgICAgICAgICAgICAgX3Jlc2V0QXV0aERhdGEoKTsKCiAgICAgICAgICAgICAgICAkcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICBuYW1lOiAnbG9naW4nCiAgICAgICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7fSk7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3JXcmFwcGVyKF9jb250ZXh0My50NSk7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIG51bGwsIFtbMCwgMTVdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHJlZnJlc2hUb2tlbnMoKSB7CiAgICAgICAgcmV0dXJuIF9yZWZyZXNoVG9rZW5zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZWZyZXNoVG9rZW5zOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiaXNBY2Nlc3NUb2tlbkV4cGlyZWQiLAoKICAgIC8qKgogICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgICogQE1FVEhPRFMKICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIGlzQWNjZXNzVG9rZW5FeHBpcmVkKCkgewogICAgICB2YXIgYWNjZXNzVG9rZW5FeHBEYXRlID0gJHN0b3JlLnN0YXRlLmF1dGguYWNjZXNzVG9rZW5FeHBEYXRlIC0gMTA7CiAgICAgIHZhciBub3dUaW1lID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApOwogICAgICByZXR1cm4gYWNjZXNzVG9rZW5FeHBEYXRlIDw9IG5vd1RpbWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFzUmVmcmVzaFRva2VuIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNSZWZyZXNoVG9rZW4oKSB7CiAgICAgIHJldHVybiBCb29sZWFuKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyZWZyZXNoVG9rZW4nKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0UmVmcmVzaFRva2VuIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRSZWZyZXNoVG9rZW4oc3RhdHVzKSB7CiAgICAgIGlmICghWycnLCAndHJ1ZSddLmluY2x1ZGVzKHN0YXR1cykpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoInNldFJlZnJlc2hUb2tlbjogaW52YWxpZCB2YWx1ZSAiLmNvbmNhdChzdGF0dXMsICI7IEV4cGVjdCBvbmUgb2YgWycnLCAndHJ1ZSddIikpOwogICAgICB9CgogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncmVmcmVzaFRva2VuJywgc3RhdHVzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRCZWFyZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEJlYXJlcigpIHsKICAgICAgcmV0dXJuIEJFQVJFUjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRCZWFyZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEJlYXJlcihhY2Nlc3NUb2tlbikgewogICAgICBCRUFSRVIgPSAiQmVhcmVyICIuY29uY2F0KGFjY2Vzc1Rva2VuKTsKICAgIH0KICAgIC8qKgogICAgICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzUyMjgwNTIvZGVib3VuY2UtZnVuY3Rpb24taW1wbGVtZW50ZWQtd2l0aC1wcm9taXNlcwogICAgICogQHBhcmFtIGlubmVyCiAgICAgKiBAcGFyYW0gbXMKICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbiguLi5bKl0pOiBQcm9taXNlPHVua25vd24+fQogICAgICogQHByaXZhdGUKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJfZGVib3VuY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWJvdW5jZShpbm5lcikgewogICAgICB2YXIgbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7CiAgICAgIHZhciB0aW1lciA9IG51bGw7CiAgICAgIHZhciByZXNvbHZlcyA9IFtdOwogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciByZXN1bHQgPSBpbm5lcigpOwogICAgICAgICAgcmVzb2x2ZXMuZm9yRWFjaChmdW5jdGlvbiAocikgewogICAgICAgICAgICByZXR1cm4gcihyZXN1bHQpOwogICAgICAgICAgfSk7CiAgICAgICAgICByZXNvbHZlcyA9IFtdOwogICAgICAgIH0sIG1zKTsKICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgIHJldHVybiByZXNvbHZlcy5wdXNoKHJlc29sdmUpOwogICAgICAgIH0pOwogICAgICB9OwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEF1dGhTZXJ2aWNlOwp9KCk7Ci8qKgogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIEBwcml2YXRlX21ldGhvZHMKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKi8KCl9kZWZpbmVQcm9wZXJ0eShBdXRoU2VydmljZSwgImRlYm91bmNlUmVmcmVzaFRva2VucyIsIEF1dGhTZXJ2aWNlLl9kZWJvdW5jZShmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIEF1dGhTZXJ2aWNlLnJlZnJlc2hUb2tlbnMoKTsKfSwgMTAwKSk7CgpmdW5jdGlvbiBfcGFyc2VUb2tlbkRhdGEoYWNjZXNzVG9rZW4pIHsKICB2YXIgcGF5bG9hZCA9ICcnOwogIHZhciB0b2tlbkRhdGEgPSB7fTsKCiAgdHJ5IHsKICAgIHBheWxvYWQgPSBhY2Nlc3NUb2tlbi5zcGxpdCgnLicpWzFdOwogICAgdG9rZW5EYXRhID0gSlNPTi5wYXJzZShhdG9iKHBheWxvYWQpKTsKICB9IGNhdGNoIChlcnJvcikgewogICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTsKICB9CgogIHJldHVybiB0b2tlbkRhdGE7Cn0KCmZ1bmN0aW9uIF9yZXNldEF1dGhEYXRhKCkgewogIC8vIHJlc2V0IHVzZXJEYXRhIGluIHN0b3JlCiAgJHN0b3JlLmNvbW1pdCgndXNlci9TRVRfQ1VSUkVOVF9VU0VSJywge30pOwogICRzdG9yZS5jb21taXQoJ2F1dGgvU0VUX0FUT0tFTl9FWFBfREFURScsIG51bGwpOyAvLyByZXNldCB0b2tlbnMKCiAgQXV0aFNlcnZpY2Uuc2V0UmVmcmVzaFRva2VuKCcnKTsKICBBdXRoU2VydmljZS5zZXRCZWFyZXIoJycpOwp9CgpmdW5jdGlvbiBfc2V0QXV0aERhdGEoKSB7CiAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSwKICAgICAgYWNjZXNzVG9rZW4gPSBfcmVmMi5hY2Nlc3NUb2tlbiwKICAgICAgZXhwID0gX3JlZjIuZXhwOwoKICBBdXRoU2VydmljZS5zZXRSZWZyZXNoVG9rZW4oJ3RydWUnKTsKICBBdXRoU2VydmljZS5zZXRCZWFyZXIoYWNjZXNzVG9rZW4pOwogICRzdG9yZS5jb21taXQoJ2F1dGgvU0VUX0FUT0tFTl9FWFBfREFURScsIGV4cCk7Cn0KCmZ1bmN0aW9uIF9nZXRGaW5nZXJwcmludCgpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgZnVuY3Rpb24gZ2V0SGFzaCgpIHsKICAgICAgcmV0dXJuIF9nZXRIYXNoLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gX2dldEhhc2goKSB7CiAgICAgIF9nZXRIYXNoID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgICB2YXIgb3B0aW9ucywgY29tcG9uZW50cywgdmFsdWVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBvcHRpb25zID0gewogICAgICAgICAgICAgICAgICBleGNsdWRlczogewogICAgICAgICAgICAgICAgICAgIHBsdWdpbnM6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGFkQmxvY2s6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgc2NyZWVuUmVzb2x1dGlvbjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGVTY3JlZW5SZXNvbHV0aW9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGVudW1lcmF0ZURldmljZXM6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgcGl4ZWxSYXRpbzogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkb05vdFRyYWNrOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHByZXByb2Nlc3NvcjogZnVuY3Rpb24gcHJlcHJvY2Vzc29yKGtleSwgdmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09ICd1c2VyQWdlbnQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgVUFQYXJzZXIodmFsdWUpOyAvLyByZXR1cm4gY3VzdG9taXplZCB1c2VyIGFnZW50ICh3aXRob3V0IGJyb3dzZXIgdmVyc2lvbikKCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiIi5jb25jYXQocGFyc2VyLmdldE9TKCkubmFtZSwgIiA6OiAiKS5jb25jYXQocGFyc2VyLmdldEJyb3dzZXIoKS5uYW1lLCAiIDo6ICIpLmNvbmNhdChwYXJzZXIuZ2V0RW5naW5lKCkubmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5wcmV2ID0gMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBGaW5nZXJwcmludDIuZ2V0UHJvbWlzZShvcHRpb25zKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgY29tcG9uZW50cyA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgICAgdmFsdWVzID0gY29tcG9uZW50cy5tYXAoZnVuY3Rpb24gKGNvbXBvbmVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gY29tcG9uZW50LnZhbHVlOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZmluZ2VycHJpbnQgaGFzaCBjb21wb25lbnRzJywgY29tcG9uZW50cyk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgU3RyaW5nKEZpbmdlcnByaW50Mi54NjRoYXNoMTI4KHZhbHVlcy5qb2luKCcnKSwgMzEpKSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dDYucHJldiA9IDEwOwogICAgICAgICAgICAgICAgX2NvbnRleHQ2LnQwID0gX2NvbnRleHQ2WyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgcmVqZWN0KF9jb250ZXh0Ni50MCk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYsIG51bGwsIFtbMSwgMTBdXSk7CiAgICAgIH0pKTsKICAgICAgcmV0dXJuIF9nZXRIYXNoLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgaWYgKHdpbmRvdy5yZXF1ZXN0SWRsZUNhbGxiYWNrKSB7CiAgICAgIGNvbnNvbGUubG9nKCdnZXQgZnAgaGFzaCBAIHJlcXVlc3RJZGxlQ2FsbGJhY2snKTsKICAgICAgcmVxdWVzdElkbGVDYWxsYmFjayggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC50MCA9IHJlc29sdmU7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0SGFzaCgpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfY29udGV4dDQudDEgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCAoMCwgX2NvbnRleHQ0LnQwKShfY29udGV4dDQudDEpKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUubG9nKCdnZXQgZnAgaGFzaCBAIHNldFRpbWVvdXQnKTsKICAgICAgc2V0VGltZW91dCggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IHJlc29sdmU7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0SGFzaCgpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfY29udGV4dDUudDEgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCAoMCwgX2NvbnRleHQ1LnQwKShfY29udGV4dDUudDEpKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpLCA1MDApOwogICAgfQogIH0pOwp9"},{"version":3,"sources":["/Users/jackson/Documents/Work/DEMO/VueJSButterCMS/src/services/auth.service.js"],"names":["Fingerprint2","UAParser","axios","Http","ResponseWrapper","ErrorWrapper","$store","$router","API_URL","BEARER","AuthService","email","password","_getFingerprint","fingerprint","post","withCredentials","response","_setAuthData","accessToken","data","exp","_parseTokenData","auth","_resetAuthData","push","name","console","log","code","accessTokenExpDate","state","nowTime","Math","floor","Date","getTime","Boolean","localStorage","getItem","status","includes","Error","setItem","inner","ms","timer","resolves","clearTimeout","setTimeout","result","forEach","r","Promise","resolve","_debounce","refreshTokens","payload","tokenData","split","JSON","parse","atob","error","commit","setRefreshToken","setBearer","reject","getHash","options","excludes","plugins","adBlock","screenResolution","availableScreenResolution","enumerateDevices","pixelRatio","doNotTrack","preprocessor","key","value","parser","getOS","getBrowser","getEngine","getPromise","components","values","map","component","String","x64hash128","join","window","requestIdleCallback"],"mappings":"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","sourcesContent":["import * as Fingerprint2 from 'fingerprintjs2'\nimport * as UAParser from 'ua-parser-js'\nimport axios from 'axios'\n\nimport { Http } from './http.init'\nimport { ResponseWrapper, ErrorWrapper } from './util'\nimport $store from '../store'\nimport $router from '../router'\n\nimport { API_URL } from '../.env'\n\nlet BEARER = ''\n\nexport class AuthService {\n  /**\n   ******************************\n   * @API\n   ******************************\n   */\n\n  static async makeLogin ({ email, password }) {\n    try {\n      const fingerprint = await _getFingerprint()\n      const response = await axios.post(`${API_URL}/auth/login`,\n        { email, password, fingerprint },\n        { withCredentials: true })\n      _setAuthData({\n        accessToken: response.data.data.accessToken,\n        exp: _parseTokenData(response.data.data.accessToken).exp\n      })\n      return new ResponseWrapper(response, response.data.data)\n    } catch (error) {\n      throw new ErrorWrapper(error)\n    }\n  }\n\n  static async makeLogout () {\n    try {\n      const response = await new Http({ auth: true }).post('auth/logout', {}, { withCredentials: true })\n      _resetAuthData()\n      $router.push({ name: 'login' }).catch(() => {})\n      return new ResponseWrapper(response, response.data.data)\n    } catch (error) {\n      throw new ErrorWrapper(error)\n    }\n  }\n\n  static async refreshTokens () {\n    try {\n      const response = await axios.post(`${API_URL}/auth/refresh-tokens`, {\n        fingerprint: await _getFingerprint()\n      }, { withCredentials: true })\n\n      _setAuthData({\n        accessToken: response.data.data.accessToken,\n        exp: _parseTokenData(response.data.data.accessToken).exp\n      })\n      return new ResponseWrapper(response, response.data.data)\n    } catch (error) {\n      console.log(error.response.data.code)\n      _resetAuthData()\n      $router.push({ name: 'login' }).catch(() => {})\n      throw new ErrorWrapper(error)\n    }\n  }\n\n  static debounceRefreshTokens = this._debounce(() => {\n    return this.refreshTokens()\n  }, 100)\n\n  /**\n   ******************************\n   * @METHODS\n   ******************************\n   */\n\n  static isAccessTokenExpired () {\n    const accessTokenExpDate = $store.state.auth.accessTokenExpDate - 10\n    const nowTime = Math.floor(new Date().getTime() / 1000)\n\n    return accessTokenExpDate <= nowTime\n  }\n\n  static hasRefreshToken () {\n    return Boolean(localStorage.getItem('refreshToken'))\n  }\n\n  static setRefreshToken (status) {\n    if (!['', 'true'].includes(status)) {\n      throw new Error(`setRefreshToken: invalid value ${status}; Expect one of ['', 'true']`)\n    }\n\n    localStorage.setItem('refreshToken', status)\n  }\n\n  static getBearer () {\n    return BEARER\n  }\n\n  static setBearer (accessToken) {\n    BEARER = `Bearer ${accessToken}`\n  }\n\n  /**\n   * https://stackoverflow.com/questions/35228052/debounce-function-implemented-with-promises\n   * @param inner\n   * @param ms\n   * @returns {function(...[*]): Promise<unknown>}\n   * @private\n   */\n  static _debounce (inner, ms = 0) {\n    let timer = null\n    let resolves = []\n\n    return function () {\n      clearTimeout(timer)\n      timer = setTimeout(() => {\n        const result = inner()\n        resolves.forEach(r => r(result))\n        resolves = []\n      }, ms)\n\n      return new Promise(resolve => resolves.push(resolve))\n    }\n  }\n}\n\n/**\n ******************************\n * @private_methods\n ******************************\n */\n\nfunction _parseTokenData (accessToken) {\n  let payload = ''\n  let tokenData = {}\n\n  try {\n    payload = accessToken.split('.')[1]\n    tokenData = JSON.parse(atob(payload))\n  } catch (error) {\n    throw new Error(error)\n  }\n\n  return tokenData\n}\n\nfunction _resetAuthData () {\n  // reset userData in store\n  $store.commit('user/SET_CURRENT_USER', {})\n  $store.commit('auth/SET_ATOKEN_EXP_DATE', null)\n  // reset tokens\n  AuthService.setRefreshToken('')\n  AuthService.setBearer('')\n}\n\nfunction _setAuthData ({ accessToken, exp } = {}) {\n  AuthService.setRefreshToken('true')\n  AuthService.setBearer(accessToken)\n  $store.commit('auth/SET_ATOKEN_EXP_DATE', exp)\n}\n\nfunction _getFingerprint () {\n  return new Promise((resolve, reject) => {\n    async function getHash () {\n      const options = {\n        excludes: {\n          plugins: true,\n          localStorage: true,\n          adBlock: true,\n          screenResolution: true,\n          availableScreenResolution: true,\n          enumerateDevices: true,\n          pixelRatio: true,\n          doNotTrack: true,\n          preprocessor: (key, value) => {\n            if (key === 'userAgent') {\n              const parser = new UAParser(value)\n              // return customized user agent (without browser version)\n              return `${parser.getOS().name} :: ${parser.getBrowser().name} :: ${parser.getEngine().name}`\n            }\n            return value\n          }\n        }\n      }\n\n      try {\n        const components = await Fingerprint2.getPromise(options)\n        const values = components.map(component => component.value)\n        console.log('fingerprint hash components', components)\n\n        return String(Fingerprint2.x64hash128(values.join(''), 31))\n      } catch (e) {\n        reject(e)\n      }\n    }\n\n    if (window.requestIdleCallback) {\n      console.log('get fp hash @ requestIdleCallback')\n      requestIdleCallback(async () => resolve(await getHash()))\n    } else {\n      console.log('get fp hash @ setTimeout')\n      setTimeout(async () => resolve(await getHash()), 500)\n    }\n  })\n}\n"]}]}